Database,Category,Guideline,Do,Don't,Code Example
PostgreSQL,Connection,Use connection pooling for efficiency,"Use psycopg2 pool or SQLAlchemy with pool_size","Create new connection for each query","from sqlalchemy import create_engine; engine = create_engine('postgresql://...', pool_size=5)"
PostgreSQL,Query,Use EXPLAIN ANALYZE for query tuning,"EXPLAIN ANALYZE your slow queries; check for seq scans","Optimize blindly without understanding execution plan","EXPLAIN ANALYZE SELECT * FROM orders WHERE date > '2024-01-01'"
PostgreSQL,Indexing,Create indexes on filtered and joined columns,"CREATE INDEX idx_date ON orders(order_date)","Index every column; forget to ANALYZE after","CREATE INDEX CONCURRENTLY to avoid locking"
PostgreSQL,Dates,Use date_trunc for time grouping,"date_trunc('month', order_date)","String manipulation on dates","SELECT date_trunc('day', ts) as day, COUNT(*) FROM events GROUP BY 1"
PostgreSQL,Window,Use window functions for analytics,"OVER (PARTITION BY ... ORDER BY ...)","Self-joins for running totals","SUM(amount) OVER (ORDER BY date ROWS UNBOUNDED PRECEDING)"
PostgreSQL,CTEs,Use CTEs for readable complex queries,"WITH step1 AS (...), step2 AS (...)","Deeply nested subqueries","WITH monthly AS (SELECT date_trunc('month', date) ...) SELECT * FROM monthly"
BigQuery,Cost,Limit scanned data with partitions and clustering,"Use WHERE on partition column; SELECT only needed columns","SELECT * without partition filter","WHERE _PARTITIONDATE BETWEEN '2024-01-01' AND '2024-01-31'"
BigQuery,Partitioning,Partition tables by date for cost and performance,"PARTITION BY DATE(timestamp_column)","Query without partition filter","CREATE TABLE ... PARTITION BY DATE(created_at)"
BigQuery,Slots,Understand slot allocation for query performance,"Use INFORMATION_SCHEMA for slot usage; optimize large scans","Ignore slot exhaustion warnings","SELECT * FROM project.INFORMATION_SCHEMA.JOBS_BY_PROJECT"
BigQuery,UDFs,Use standard SQL before custom JavaScript UDFs,"Built-in functions are optimized","JavaScript UDFs for simple operations","Use SAFE_DIVIDE, IF, CASE instead of JS"
BigQuery,Approximate,Use approximate functions for large datasets,"APPROX_COUNT_DISTINCT, APPROX_QUANTILES","Exact distinct counts on huge tables","SELECT APPROX_COUNT_DISTINCT(user_id) FROM events"
BigQuery,Qualify,Use QUALIFY for window function filtering,"QUALIFY ROW_NUMBER() OVER (...) = 1","Subquery wrapper for filtering","SELECT * FROM table QUALIFY RANK() OVER (PARTITION BY id ORDER BY ts DESC) = 1"
Snowflake,Warehouse,Size warehouse appropriately for workload,"Use X-Small for dev; auto-suspend after 60s","Leave large warehouse running idle","ALTER WAREHOUSE SET WAREHOUSE_SIZE = 'MEDIUM' AUTO_SUSPEND = 60"
Snowflake,Clustering,Use clustering keys for large tables,"Cluster on frequently filtered columns","Cluster on high-cardinality columns","ALTER TABLE orders CLUSTER BY (region, order_date)"
Snowflake,Time Travel,Use time travel for data recovery and analysis,"Query historical data: AT (TIMESTAMP => ...)","Forget Time Travel is available for debugging","SELECT * FROM table AT (OFFSET => -3600)"
Snowflake,Zero Copy Clone,Clone tables for testing without storage cost,"CREATE TABLE test_copy CLONE production","Full physical copies for testing","CREATE TABLE dev.orders CLONE prod.orders"
MySQL,Indexes,Use composite indexes for multi-column queries,"Create index matching WHERE + ORDER BY columns","Too many indexes slow writes","CREATE INDEX idx_user_date ON orders(user_id, order_date)"
MySQL,Query Cache,Understand query cache behavior (deprecated in 8.0),"Use application-level caching instead","Rely on MySQL query cache","Use Redis or Memcached for caching"
MySQL,Limits,Use LIMIT with ORDER BY for pagination,"ORDER BY id LIMIT 100 OFFSET 200","LIMIT without ORDER BY (non-deterministic)","SELECT * FROM users ORDER BY id LIMIT 100 OFFSET 0"
MySQL,Joins,Prefer JOINs over subqueries when possible,"Rewrite correlated subqueries as JOINs","Correlated subqueries for large datasets","JOIN instead of WHERE x IN (SELECT ...)"
SQLite,Limitations,Understand SQLite limitations for analytics,"Good for local dev and small datasets","Use for production with concurrent writes","Maximum practical size ~1TB; limited concurrency"
SQLite,Types,SQLite uses dynamic typing,"Check actual types: typeof(column)","Assume strict typing like other databases","Be aware: '1' and 1 may both be stored"
Redshift,Distribution,Choose distribution key for join performance,"Distribute on frequently joined column","ALL distribution for large tables","CREATE TABLE ... DISTKEY(user_id)"
Redshift,Sort Keys,Use sort keys for range queries,"Sort on commonly filtered date columns","Too many sort key columns","CREATE TABLE ... SORTKEY(created_date)"
Redshift,Vacuum,Run VACUUM and ANALYZE regularly,"Schedule VACUUM DELETE ONLY weekly","Forget to reclaim space after deletes","VACUUM FULL table_name; ANALYZE table_name"
Redshift,Spectrum,Use Spectrum for querying S3 data directly,"External tables for cold/historical data","Load all data into Redshift","CREATE EXTERNAL TABLE pointing to S3"
MongoDB,Aggregation,Use aggregation pipeline for analytics,"$match early to reduce documents","Process large result sets in application","db.collection.aggregate([{$match: ...}, {$group: ...}])"
MongoDB,Indexes,Create indexes for query patterns,"Compound indexes matching query predicates","Index fields not used in queries","db.collection.createIndex({user_id: 1, date: -1})"
DynamoDB,Queries,Design for query patterns not data model,"Access patterns determine table design","Scan operations on large tables","Use Query with partition key; avoid Scan"
DynamoDB,GSI,Use Global Secondary Indexes for alternate access,"GSI for different query patterns","Too many GSIs (cost and write amplification)","Create GSI for each major access pattern"
General,Testing,Test queries on sample data first,"Use LIMIT or sampling for initial development","Run untested queries on full production data","SELECT * FROM table TABLESAMPLE (1 PERCENT)"
General,Transactions,Use transactions for data integrity,"Wrap related changes in transactions","Auto-commit for multi-statement updates","BEGIN; UPDATE ...; UPDATE ...; COMMIT;"
General,Comments,Document complex queries with comments,"Add comments explaining business logic","Uncommented complex SQL","-- Calculate 30-day rolling revenue per customer"
General,Parameterization,Use parameterized queries to prevent SQL injection,"Use ? or :param placeholders","String concatenation for query building","cursor.execute('SELECT * FROM users WHERE id = ?', (user_id,))"
